<apex:page controller="ChatterToolCtrl" showHeader="true" sidebar="false" standardStyleSheets="true">
    <title>SDO Chatter Charades 2 Include</title>
    <apex:composition template="SDO_Bootstrap_Template"/>
    
    <style>
        body
        {
        }
        .bodyDiv
        {
            background: #E8E8E8;
            min-height: 600px;
        }
        .dateFormat
        {
            overflow: hidden;
        }
        #wrapper
        {
            width: 867px;
            padding: 0 15px;
        }
        #wrapper form
        {
            //position:relative;
            //width: 310px;
            //float: left;
        }
        #leftSide
        {
            padding: 0px 7px;
            overflow: hidden;
        }
        
        #rightSide
        {
            display:none;
            position: relative;
            float: left;
            padding: 10px;
            margin: 0 7px;
            width: 830px;
            //box-shadow: 0 0 9px 1px rgba(0,0,0,0.7);
            border-radius: 0 0 5px 5px;
            border:1px solid rgb(173, 173, 173);
            border-top:none;
            background: rgb(239,247,250); /* Old browsers */
            background: -moz-linear-gradient(top, rgba(239,247,250,1) 0%, rgba(247,247,247,1) 100%); /* FF3.6+ */
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(239,247,250,1)), color-stop(100%,rgba(247,247,247,1))); /* Chrome,Safari4+ */
            background: -webkit-linear-gradient(top, rgba(239,247,250,1) 0%,rgba(247,247,247,1) 100%); /* Chrome10+,Safari5.1+ */
        }
        #selectList
        {
            position: relative;
            float: left;
            margin: 0 7px;
            padding: 10px;
            width: 830px;
            //box-shadow: 0 0 9px 1px rgba(0,0,0,0.7);
            border:1px solid rgb(173, 173, 173);
            border-top:none;
            border-radius: 0 0 5px 5px;
            background: rgb(239,247,250); /* Old browsers */
            background: -moz-linear-gradient(top, rgba(239,247,250,1) 0%, rgba(247,247,247,1) 100%); /* FF3.6+ */
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(239,247,250,1)), color-stop(100%,rgba(247,247,247,1))); /* Chrome,Safari4+ */
            background: -webkit-linear-gradient(top, rgba(239,247,250,1) 0%,rgba(247,247,247,1) 100%); /* Chrome10+,Safari5.1+ */
        
        }
        .tab
        {
            position: relative;
            left: -1px;
            display:inline-block;
            padding: 10px 20px;
            margin: 1px 0px;
            border-radius: 4px 4px 0 0;
            border: 1px solid black;
            border-bottom: none;
            box-shadow: 0px -1px 2px 0px rgba(0, 0, 0, 0.3);
            color: gray;
            background: white;
            cursor: pointer;
            font-weight: bold;
        }
        .currentTab
        {
            background: #EFF7FA;
            top: 1px;
            color: black;
        }
        .tab:hover
        {
            box-shadow: inset 0px 0px 12px 5px rgba(255, 255, 255, 0.2);
        }
        
        #leftContent
        {
            height: 180px;
            width: 830px;
            margin-right: 10px;
            padding: 10px;
            background: #EFF7FA;
            //box-shadow: 0 0 9px 1px rgba(0,0,0,0.7);
            border-radius: 5px 5px 0 0;
            border: 1px solid rgb(173, 173, 173);
            border-bottom:none;
            //border-top:none;
            
        }
        #leftContent label
        {
            position: relative;
            float: left;
            clear: left;
            padding: 5px 3px;
            width: 97px;
            font-weight: bold;
            text-align: right;
        }
        .myLabels
        {
            position: relative;
            float:left;
            clear: left;
        }
        .myInputs
        {
            position:relative;
            float:left;
        }
        #leftContent select
        {
            width: 125px;
        }
        #leftContent textarea
        {
            width: 415px;
            height: 50px;
            border: 1px solid #c7ccce;
            padding: 7px;
            line-height: 16px;
            word-wrap: break-word;
            border-radius: 5px;
        }
        #leftContent input
        {
            margin: 6px 1px;
            border-radius: 5px;
        }
        
        .inputSection
        {
            position:relative;
            float:left;
            margin: 3px;
        }
        .inputSection input
        {
            width: 305px;
            margin: 2px 3px !important;
            height: 17px;
            padding: 3px;
            border-radius: 3px;
        }
        .inputSection:nth-child(3) input
        {
            width: 135px !important;
        }
        #dropdownLists
        {
            position: relative;
            clear: left;
            float: left;
            width: 380px;
            height: 150px;
        }
        .followBtn
        {
            position: relative;
            float: left;
            padding: 7px 9px 10px 5px;
            width: 71px;
            height: 23px;
            cursor: pointer;
        }
        .followBtn2
        {
            position: relative;
            float: left;
            padding: 0px 9px;
            width: 71px;
            height: 23px;
            cursor: pointer;
        }
        .followTextDiv
        {
            float: right;
            position: relative;
            top: 4px;
            left: -8px;
            color: #015ba7;
            padding: 0px;
        }
        .followTextDiv:hover
        {
            text-decoration: underline; 
        }
        .followedBtn
        {
            position: relative;
            float: left;
            padding: 5px 9px 10px 5px;
            width: 100px;
            height: 23px;
        }
        .followedBtn2
        {
            position: relative;
            float: left;
            padding: 0px 9px;
            width: 100px;
            height: 23px;
        }
        .followedTextDiv
        {
            float: right;
            position: relative;
            top: 4px;
            left: -8px;
            color: #015ba7;
            padding: 0px;
        }
        .followingX
        {
            background: #E4EBF1;
            border-radius: 20px;
            color: white;
            width: 12px;
            padding: 0px 3px 1px 3px;
            font-weight: bold;
        }
        .followingX:hover 
        {
            background: #A8D5E4;
            color:blue;
            cursor:pointer;
        }
        
        #tabPanel
        {
            position: relative;
            float: left;
            width: 446px;
            height: 160px;

        }
        #PostLinkFileTabs
        {
            height: 31px;
        }
        
        .errorDiv
        {
            position: relative;
            float: left;
            clear:left;
            width: 231px;
            height: 22px;
            margin: 8px 0px;
            color: red;
        }
        .postTab
        {
            position:relative;
            float: left;
            padding: 9px 9px 10px 5px;
            cursor: pointer;
            font-weight: bold;
        }
        .postTab span
        {
            position:relative;
        }
        .currentPostTab
        {
            color: #015ba7;
        }
        .myFeedTypeTab
        {
            display:none;
        }
        .myFeedTypeTab label
        {
            width: 70px !important;
        }
        #contentPost input
        {
            width: 175px;
        }
        
        #textPost
        {
            position:relative;
            float:left;
        }
        #whiteTriangle
        {
            position: absolute;
            width: 7px;
            height: 7px;
            top: -4px;
            left: 23px;
            -webkit-transform: rotate(45deg);
            -moz-transform: rotate(45deg);
            -ms-transform: rotate(45deg);
            border: 1px solid #c7ccce;
            border-right: none;
            border-bottom: none;
            background: rgb(255, 255, 255);
        }
        #myBodyInput
        {
            position:relative;
            float:left;
        }
        #postBtn
        {
            position: relative;
            float: right;
            clear: left;
            width: 82px;
        }
        
        #backNav
        {    
            position: relative;
            float: left;
            clear:both;
            padding: 0 10px 10px 0;
            line-height: 25px;
            height: 20px;
            margin: -9px 0 0 0;
        }
        
        #backToList
        {
            display: none;
            position:relative;
            float: left;
            padding: 10px 10px 0px 0px;
        }
        #searchBox
        {
            text-align: right;
            position:relative;
            float: left;
            -webkit-transition:all 0.2s ease-in-out;
            padding: 2px 0px;
        }
        .loadingStatus
        {
            position: absolute;
            left: 380px;
            padding: 5px;
            width: 100px;
            height: 28px;
            font-size: 18px;
            font-style:italic;
            
        }
        
        .commandBtn
        {
            padding: 15px 20px !important;
            height: 30px !important;
            color: #fff !important;
            border-radius: 2px !important;
            box-shadow: 0 1px 2px 0 #adadad  !important;
            font-family: Arial !important;
            font-size: 1.08em !important;
            text-shadow: none;
            line-height: 0px !important;
            background: #8ab529 !important;
            border: 1px solid #6c8049;
        }
        .commandBtn:hover
        {
            background: rgb(147, 197, 34) !important;
        }
        #popupBackground
        {
            display: none;
            position: absolute;
            top:0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.3);
        }
        #popup
        {
            display:none;
            position: absolute;
            width: 300px;
            height: 110px;
            background: white;
            border: 1px solid black;
            border-radius: 4px;
            box-shadow: 0px 0px 8px 1px rgba(0,0,0,0.8);
            z-index: 2;
        }
        
        .parentIdLink
        {
            padding: 2px 0px;
        }
        #parentName
        {
            position: relative;
            left: 4px;
            clear: right;
            height: 16px;
            padding: 6px;
            line-height: 16px;
        }
        
        .myTextBox
        {
            width: 451px;
            height: 75px;
            border: 1px solid #c7ccce;
            padding: 4px !important;
            line-height: 16px;
            word-wrap: break-word;
            border-radius: 5px;
        }
        #chatterFeedCommentDiv
        {
            display:none;
            z-index: 999;
        }
        .feeditemseparatingdot, .cxaddcommentaction .cxlikeitemaction, .cxbookmarkaction .cxunbookmarkaction .bookmarkLink
        {
            //display: none !important;
        }
        .actionsOnHoverEnabled .bookmarkLink
        {
            display: none !important;
        }
        
        .feedDeleteLink
        {
            width: 8px !important;
            height: 8px !important;
        }
        .commentDeleteLink
        {
            width: 8px !important;
            height: 8px !important;
        }
        .cxcommentplaceholder, .feeditemcommentplaceholder 
        {
            display:none;
        }
        .feeditemcommentplaceholder input {
            min-height: 2.3em !important;
            cursor: text !important;
        }
        .cxfeeditem, .feeditemcomment 
        {
            clear:both;
        }
        .myPostFeedCommentBtn
        {
            position:relative;
            float:right;
            background: #8ab529 !important;
            width: 100px !important;
            color: white !important;
            text-shadow: none;
        }
        .myPostFeedCommentBtn:hover
        {
            background: rgb(147, 197, 34) !important;
        }
        .myPostFeedLikeBtn
        {
            position:relative;
            float:right;
            background: #8ab529 !important;
            width: 100px !important;
            color: white !important;
            text-shadow: none;
        }
        .myPostFeedLikeBtn:hover
        {
            background: rgb(147, 197, 34) !important;
        }
        .myPostFeedCommentLikeBtn
        {
            position:relative;
            float:right;
            background: #8ab529 !important;
            width: 100px !important;
            color: white !important;
            text-shadow: none;
        }
        .myPostFeedCommentLikeBtn:hover
        {
            background: rgb(147, 197, 34) !important;
        }
        
        
        #commentCreatedDate
        {
            position:relative;
            float:left;
            width: 360px;
            height: 30px;
            
        }
        .floatLeft
        {
            position:relative;
            float: left;
            line-height: 20px;
            padding: 10px 8px 10px 0px;
        }
        .myDateInput
        {
            width: 116px;
        }
        .createDateDiv
        {
            top:-5px;
        }
        .feedCommentForm
        {
            min-width: 450px;
        }
        
        .postAs
        {
            width: 461px;
            height: 75px;
            margin: 7px 0px;
            font-size: 12px;
            font-weight: bold;
        }
        .postAs select
        {
            margin:1px 5px;
        }
        .publishercontainer
        {
            display:none;
        }
        .showmorefeeditemscontainer
        {
            display:none;
        }
        
    </style>
    <script>
        var myParentId = '';
        var tour;
        jQuery.fn.center = function () 
        {
            this.css("position","absolute");
            this.css("top", 182);
            //this.css("top", Math.max(0, (($(window).height() - $(this).outerHeight()) / 2) + $(window).scrollTop()) + "px");
            this.css("left", Math.max(0, (($(window).width() - $(this).outerWidth()) / 2) + $(window).scrollLeft()) + "px");
            return this;
        }
        
        $(document).ready(function(){
            init();
            /***************************** feed type tabs *************************/
            $("#selectTextPost").click(function(){
                changeFeedType('TextPost');
                $(".myFeedTypeTab").hide();
                $("#textPost").show();
                $(".postTab").removeClass("currentPostTab");
                $(this).addClass("currentPostTab");
                $("#leftContent").css("height","180px");
                $("#backNav").css("margin","-9px 0 0 0");
            });
            $("#selectLinkPost").click(function(){
                changeFeedType('LinkPost');
                $(".myFeedTypeTab").hide();
                $("#linkPost").show();
                $(".postTab").removeClass("currentPostTab");
                $(this).addClass("currentPostTab");
                $("#leftContent").css("height","230px");
                $("#backNav").css("margin","44px 0 0 0");
            });
            $("#selectContentPost").click(function(){
                changeFeedType('ContentPost');
                $(".myFeedTypeTab").hide();
                $("#contentPost").show();
                $(".postTab").removeClass("currentPostTab");
                $(this).addClass("currentPostTab");
                $("#leftContent").css("height","195px");
                $("#backNav").css("margin","8px 0 0 0");
            });
        
            $("#postFile").click(function(){
                showPopup();
            });
        });
        $(document).keyup(function(e) {
            if (e.keyCode == 27) { parent.hidePopup(); }   // esc
        });
        
        
        function setFocusOnLoad() {} //set to nothing so 1st input wouldn't focus
        
        function init()
        {
            $("#popup").center();
        }
        function changeSelectedParentType(inputType)
        {
            $("[id*='selectedParentType']").val(inputType);
            //console.log($("[id*='selectedParentType']").val());
        }
        function changeFeedType(inputType)
        {
            $("[id*='feedItemType']").val(inputType);
            //console.log('feed item type: '+$("[id*='feedItemType']").val());
        }
        
        function showPopup()
        {
            $("#popup").fadeIn('fast');
            $("#popup").center();
            $("#popupBackground").fadeIn('fast');
        }
        function hidePopup()
        {
            $("#popupBackground").fadeOut();
            $("#popup").fadeOut();
            //refresh filenamePanel
            refreshFilenamePanel();
        }
        function showRightSide()
        {
            $("#searchBox").css('opacity','0');
            $("#selectList").hide();
            $("#rightSide").fadeIn();
            $("#backToList").show();
        }
        function showListView()
        {
            $("#searchBox").css('opacity','1');
            $("#rightSide").hide();
            $("#selectList").fadeIn();
            $("#backToList").hide();
        }
        function changeParentId(theId)
        {
            $("[id*='parentIdInput']").val(theId);
            apexParentChange();
            showRightSide();
        }
        function changeParentCommentIdFromChatter(myLink,theId)
        {
            //console.log('clicked Id: '+ theId);
            $(".feedCommentForm").hide();
            
            $("[id*='selectedCommentId']").val(theId);
            var myDivHtml = $("#chatterFeedCommentDiv").html();
            
            $(myLink).parent().parent().append(myDivHtml);
            $(myLink).parent().parent().children(".feedCommentForm").show();
            $(".myTextBox").show();
            $(".myPostFeedCommentBtn").show();
            $(".commentCreatedDate").show();
            //hide sheez you don't need
            $(".myPostFeedLikeBtn").hide();
            $(".myPostFeedCommentLikeBtn").hide();
            $(".cxcommentplaceholderaction").hide();
        }
        function changeParentLikeIdFromChatter(myLink,theId)
        {
            //console.log('clicked Id: '+ theId);
            $(".feedCommentForm").hide();
            $("[id*='selectedFeedLikeParent']").val(theId);
            var myDivHtml = $("#chatterFeedCommentDiv").html();
            $(myLink).parent().parent().append(myDivHtml);
            $(myLink).parent().parent().children(".feedCommentForm").show();
            //hide Post comment button and textarea
            $(".commentCreatedDate").hide();
            $(".myPostFeedCommentBtn").hide();
            $(".myPostFeedLikeBtn").show();
            $(".myPostFeedCommentLikeBtn").hide();
            $(".myTextBox").hide();
            $(".cxcommentplaceholderaction").hide();
            
        }
        function changeCommentParentLikeIdFromChatter(myLink,theId,thefeedItemId)
        {
            //console.log('clicked Id: '+ theId);
            $(".feedCommentForm").hide();
            $("[id*='selectedFeedLikeParent']").val(theId);
            $("[id*='selectedFeedCommentLikeParent']").val(thefeedItemId);
            var myDivHtml = $("#chatterFeedCommentDiv").html();
            $(myLink).parent().parent().append(myDivHtml);
            $(myLink).parent().parent().children(".feedCommentForm").show();
            //hide Post comment button and textarea
            $(".commentCreatedDate").hide();
            $(".myPostFeedCommentBtn").hide();
            $(".myPostFeedLikeBtn").hide();
            $(".myPostFeedCommentLikeBtn").show();
            $(".myTextBox").hide();
            $(".cxcommentplaceholderaction").hide();
            
        }
        //show list of Sobjects
        function changeParentObject()
        {
            apexParentObjectChange();
            showListView();
        }
        //after SObject is selected, change to chatterfeed view
        function parentObjectSelected(selectedId)
        {
            changeParentId(selectedId);
            showRightSide();
        }
        function loadFeedItemIds()
        {
            var tempAttrString;
            var allposts = $('.cxlikeitemaction');
            var allcxcommentplaceholderaction = $(".cxcommentplaceholderaction");
            for(var index=0;index< allposts.length;index++)
            {
                tempAttrString = allposts.eq(index).attr("onclick");
                tempAttrString = tempAttrString.replace("chatter.getFeed().likeItem(this, '","");
                tempAttrString = tempAttrString.replace("');","");
                //var linkHtml = "<div class=\"parentIdLink\">"+
                //                  "<a href=\"javascript:void()\" onclick=\"changeParentCommentIdFromChatter(this,'"+tempAttrString+"')\">Post FeedComment</a>"+
                //              "</div>";
                //$(".feeditemfooter:eq("+index+")").append(linkHtml);
                
                //console.log("link:"+linkHtml);
                
                var clickString = "changeParentCommentIdFromChatter(this,'"+tempAttrString+"')";
                allcxcommentplaceholderaction.eq(index).attr("onclick",clickString);
                allcxcommentplaceholderaction.eq(index).removeAttr("onfocus");
                allcxcommentplaceholderaction.eq(index).removeAttr("onkeypress");
                //console.log("clickString: "+clickString);
                
                $(".cxaddcommentaction").eq(index).attr("onclick",clickString);
                
            }
            
            var allFeedItemLikes = $(".cxlikeitemaction");
            for(var index=0;index< allFeedItemLikes.length;index++)
            {
                tempAttrString = allFeedItemLikes.eq(index).attr("onclick");
                tempAttrString = tempAttrString.replace("chatter.getFeed().likeItem(this, '","");
                tempAttrString = tempAttrString.replace("');","");
                var clickLikeString;
                
                //console.log('tempAttrString: '+tempAttrString);
                
                clickLikeString = "changeParentLikeIdFromChatter(this,'"+tempAttrString+"')";
                $(".cxlikeitemaction").eq(index).attr("onclick",clickLikeString);
            }
            
            //it is a comment's like, has another parameter such as: ...0D558000000l9b3', '0D7580000004uwH... 
            var allFeedCommentLikes = $(".cxlikecommentaction");
            var FeedItemId, FeedEntityId;
            for(var index=0;index < allFeedCommentLikes.length;index++)
            {
                tempAttrString = allFeedCommentLikes.eq(index).attr("onclick");
                tempAttrString = tempAttrString.replace("chatter.getFeed().likeComment(this, '","");
                tempAttrString = tempAttrString.replace("');","");
                FeedItemId = tempAttrString.substring(0,tempAttrString.indexOf("'"));
                FeedEntityId = tempAttrString.substring(tempAttrString.indexOf(',')+3,tempAttrString.length);
                
                var clickLikeString;
                
                //console.log('FeedItemId: '+FeedItemId+', ::::::::: FeedEntityId: '+FeedEntityId);
                clickLikeString = "changeCommentParentLikeIdFromChatter(this,'"+FeedEntityId+"','"+FeedItemId+"')";
                $(".cxlikecommentaction").eq(index).attr("onclick",clickLikeString);
            }
            
        }
        
        function myBodyFocus()
        {
            //$("#whiteTriangle").css('border-color','orange');
        }
        function myBodyBlur()
        {
            //$("#whiteTriangle").css('border-color','#c7ccce');
        }
        
        function setFollowingId(recordId)
        {
            $("[id*='selectedFollowIdFromList']").val(recordId);
            console.log('following id: '+$("[id*='selectedFollowIdFromList']").val());
            //then follow or unfollow
            apexfollowToggleFromList();
        }
        
    </script>

<!-- This is to track the Google Analytics -->    
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-36269828-6']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


    <div id="wrapper">
        <img src="{!URLFOR($Resource.SDO_ChatterCharades, 'CC_ChatterCharadesLogo.png')}" style="height: 40px;padding: 0 5px;"/>
        <apex:form id="form1">
            <div id="leftSide">
                    <apex:actionFunction action="{!changeParentId}" name="apexParentChange" reRender="feeditems,parentIdPanel, followPanelWrapper" status="loadingStatus"/>
                    <apex:actionFunction action="{!changeParentObject}" name="apexParentObjectChange" reRender="parentIdPanel, selectionList, followPanelWrapper" status="loadingStatus"/>
                    <apex:actionFunction action="{!changeParentCommentIdFromChatter}" name="apexParentCommentChangeFromChatter" reRender="selectionList" status="loadingStatus"/>
                    <!--  <apex:actionFunction action="{!changeNetworkScope}" name="apexChangeNextworkScope" reRender="parentIdPanel"/> -->
                    <!--<apex:actionFunction action="{!changeNetworkScopeToDefault}" name="apexChangeNextworkScopeToDefault" reRender="parentIdPanel"/>-->
                    <apex:actionFunction action="{!changeFromId}" name="apexChangeFromId" reRender="parentIdPanel, followPanelWrapper, selectionList" status="loadingStatus"/>
                    <apex:actionFunction action="{!getFileName}" name="refreshFilenamePanel" reRender="filenamePanel" status="loadingStatus"/>
                    <apex:actionFunction action="{!follow}" name="apexFollow" reRender="followPanelWrapper,selectionList" status="loadingStatus"/>
                    <apex:actionFunction action="{!unfollow}" name="apexUnfollow" reRender="followPanelWrapper,selectionList" status="loadingStatus"/>
                    <apex:actionFunction action="{!followToggleFromList}" name="apexfollowToggleFromList" reRender="selectionList,followPanelWrapper" status="loadingStatus"/>
                    <apex:inputHidden id="selectedParentType" value="{!selectedParentType}"/>
                    <apex:inputHidden id="feedItemType" value="{!myFeed.Type}"/>
                    <apex:inputHidden id="selectedFollowIdFromList" value="{!selectedFollowIdFromList}"/>
                    <div id="leftContent">
                        <div id="dropdownLists">
                            <!--  pick list for object here! -->
                            <div class="myLabels">
                                <label>Post To Object:</label>
                            </div>
                            <div class="myInputs">
                                <apex:SelectList id="postToObject" value="{!selectedToObject}" size="1" onchange="changeParentObject()">
                                    <apex:selectOptions value="{!Names}"></apex:selectOptions>
                                </apex:SelectList>
                            </div>
                            <div class="myLabels">
                                <label>To:</label>
                            </div>
                            <div class="myInputs">
                                <apex:outputPanel id="parentIdPanel">
                                    <div id="parentName" >
                                        <a href="{!$Site.Prefix}/{!parentIdInput}">{!selectedParentName}</a>
                                        <!-- <apex:outputText value="{!selectedParentName}" label="To: "/> -->
                                    </div>
                                    <apex:inputHidden id="parentIdInput" value="{!parentIdInput}"/>
                                </apex:outputPanel>
                            </div>
                            <div class="myLabels">
                                <label>From:</label>
                            </div>
                            <div class="myInputs">
                                <apex:SelectList id="selectedCommentUserId" value="{!myFeed.CreatedById}" size="1" onchange="apexChangeFromId()">
                                    <apex:selectOptions value="{!Users}"></apex:selectOptions>
                                </apex:SelectList>
                            </div>
                            <div class="myLabels">
                                <label>CreatedDate:</label>
                            </div>
                            <div class="myInputs createDateDiv">
                                <apex:inputField id="createdDate" styleClass="myDateInput" value="{!myFeed.CreatedDate}" />
                            </div>
                            
                            
                        </div>
                        <div id="tabPanel">
                            <div id="PostLinkFileTabs">
                                <div id="selectTextPost" class="postTab"><img src="{!URLFOR($Resource.SDO_ChatterCharades, 'CC_postIcon.png')}"/><span>Post</span></div>
                                <div id="selectLinkPost" class="postTab"><img src="{!URLFOR($Resource.SDO_ChatterCharades, 'CC_linkIcon.png')}"/><span>Link</span></div>
                                <div id="selectContentPost" class="postTab"><img src="{!URLFOR($Resource.SDO_ChatterCharades, 'CC_fileIcon.png')}"/><span>File</span></div>
                                <apex:outputPanel id="followPanelWrapper">
                                    <apex:outputPanel id="followPanel" rendered="{!NOT alreadyFollowing && showFollowDiv}">
                                        <div class="followBtn" onclick="apexFollow()">
                                            <img src="{!URLFOR($Resource.SDO_ChatterCharades, 'CC_followIcon.png')}"/>
                                            <div class="followTextDiv">Follow</div>
                                        </div>
                                    </apex:outputPanel>
                                    <apex:outputPanel id="followedPanel" rendered="{!alreadyFollowing && showFollowDiv}">
                                        <div class="followedBtn">
                                            <img src="{!URLFOR($Resource.SDO_ChatterCharades, 'CC_followedIcon.png')}"/>
                                            <div class="followedTextDiv">Following
                                                <span class="followingX" onclick="apexUnfollow()">x</span>
                                            </div>
                                        </div>
                                    </apex:outputPanel>
                                </apex:outputPanel>
                            </div>
                            <div id="linkPost" class="myFeedTypeTab">
                                <label>Link Title:</label>
                                <div class="inputSection">
                                    <apex:inputField value="{!myFeed.Title}" />
                                </div>
                                <label>Link URL:</label>
                                <div class="inputSection">
                                    <apex:inputField value="{!myFeed.LinkUrl}" />
                                </div>
                            </div>
                            <div id="contentPost" class="myFeedTypeTab">
                                <label>File Name:</label>
                                <div class="inputSection">
                                    <apex:outputPanel id="filenamePanel">
                                        <apex:inputField id="filename" value="{!myFeed.ContentFileName}" />
                                    </apex:outputPanel>
                                    <div id="postFile" class="btn">Select File</div>
                                </div>
                            </div>
                            <div id="textPost">
                                <div id="myBodyInput">
                                    <apex:inputField id="myBody" value="{!myFeed.Body}" styleClass="myBodyInputClass" onfocus="myBodyFocus()" onblur="myBodyBlur()"/>
                                    <div id="whiteTriangle"/>
                                </div>
                                <div id="postBtn">
                                    <apex:commandButton value="Share" action="{!post}" reRender="feeditems,errorMessage" styleClass="commandBtn"/>
                                </div>
                                <div class="errorDiv">
                                    <apex:outputPanel id="errorMessage">
                                        <apex:outputText value="{!errorMessage}"/>
                                    </apex:outputPanel>
                                </div>
                            </div>
                        </div>
                        <div id="backNav">
                            <div id="backToList">
                                <a href="javascript:void()" onclick="showListView()"><img src="{!URLFOR($Resource.SDO_ChatterCharades, 'CC_list_icon.png')}" style="width:15px;padding-right: 5px;"/>Back to List</a>
                            </div>
                            <div id="searchBox">
                                <span><b>Search:</b></span>
                                <apex:inputText value="{!listSearchString}" onchange="apexParentObjectChange()"/>
                            </div>
                            <div class="loadingStatus">
                                <apex:actionStatus id="loadingStatus" startText="loading..." /> <!-- startStyleClass="loadingStatusOn" stopStyleClass="loadingStatusOff"  -->
                            </div>
                            <!-- <a style="" href="javascript:void()" onclick="showRightSide()"><img src="{!$Resource.message_icon}" style="width:50px"/></a>  -->
                        </div>
                    </div>
            </div>
            
        </apex:form>
        <div id="rightSide">
            <apex:outputPanel id="feeditems">
                <chatter:feed entityId="{!selectedParentId}" />
                <script>
                    //load feedItem Ids into Chatter Feed
                    loadFeedItemIds();
                    //hide share button
                    $("[class*='dialog_RechatDialog']").next().hide();
                    $("[class*='dialog_RechatDialog']").hide();
                    //console.log('Selected from id: {!myFeed.CreatedById}');
                    //console.log('Selected to id: {!selectedParentId}');
                </script>
            </apex:outputPanel>
            
        </div>
        <div id="selectList">
            <apex:outputPanel id="selectionList">
                <apex:pageBlock >
                    <apex:pageBlockTable value="{!parentObjects}" var="obj">
                        <apex:column headerValue="Select">
                            <a href="javascript:void()" onclick="parentObjectSelected('{!obj.id}')">{!obj[nameTitle]}</a>
                        </apex:column>
                        
                        <apex:column width="125">
                            <apex:outputPanel id="listViewFollowDiv" rendered="{!showFollowDiv}">
                                <apex:outputPanel id="followListPanel" rendered="{!NOT idToFollowList[obj.id]}">
                                    <div class="followBtn2" onclick="setFollowingId('{!obj.id}')">
                                        <img src="{!URLFOR($Resource.SDO_ChatterCharades, 'CC_followIcon.png')}"/>
                                        <div class="followTextDiv">Follow</div>
                                    </div>
                                </apex:outputPanel>
                                <apex:outputPanel id="followedListPanel" rendered="{!idToFollowList[obj.id]}">
                                    <div class="followedBtn2">
                                        <img src="{!URLFOR($Resource.SDO_ChatterCharades, 'CC_followedIcon.png')}"/>
                                        <div class="followedTextDiv">Following
                                            <span class="followingX" onclick="setFollowingId('{!obj.id}')">x</span>
                                        </div>
                                    </div>
                                </apex:outputPanel>
                            </apex:outputPanel>
                        </apex:column>
                        <!-- <apex:column value="{!obj.id}"/>  -->
                        <apex:column headerValue="Link">
                            <a href="{!$Site.Prefix}/{!obj.id}"><img src="/img/chatter/chatterC45.png" style="width:15px;"/> link to {!obj[nameTitle]}</a>
                        </apex:column>
                    </apex:pageBlockTable>
                </apex:pageBlock>
            </apex:outputPanel>
        </div>
        <div id="popupBackground"/>
        <div id="popup">
            <iframe src="{!$Site.Prefix}/apex/SDO_Chatter_Charades_2_File_Upload" frameborder="0" width="300" height="110" scrolling="no"/>
        </div>
        
        <div id="chatterFeedCommentDiv" >
            <apex:form styleClass="feedCommentForm">
                <apex:inputHidden id="selectedCommentId" value="{!selectedCommentId}"/>
                <apex:inputHidden id="selectedFeedLikeParentId" value="{!selectedFeedLikeParent}"/>
                <apex:inputHidden id="selectedFeedCommentLikeParentId" value="{!selectedFeedCommentLikeParent}"/>
                <apex:InputTextArea id="commentTextArea" value="{!myFeedComment.CommentBody}" styleClass="myTextBox"/>
                <div class="postAs">
                    Post As:
                    <apex:SelectList id="selectedCommentUserId" value="{!myFeedComment.CreatedById}" size="1">
                        <apex:selectOptions value="{!Users}"></apex:selectOptions>
                    </apex:SelectList>
                    <apex:commandButton styleClass="myPostFeedCommentBtn" action="{!postFeedCommentFromFeed}" value="Post Comment" reRender="feeditems,errorMessage"/>
                    <apex:commandButton styleClass="myPostFeedLikeBtn" action="{!postFeedLike}" value="Like Feed" reRender="feeditems,errorMessage"/>
                    <apex:commandButton styleClass="myPostFeedCommentLikeBtn" action="{!postFeedCommentLike}" value="Like Comment" reRender="feeditems,errorMessage"/>
                    <div class="commentCreatedDate">
                        <div class="floatLeft">
                            <b>CreatedDate:</b>
                        </div>
                        <div class="floatLeft">
                        <apex:inputField id="commentCreatedDate" styleClass="myDateInput" value="{!myFeedComment.CreatedDate}" />
                        </div>
                    </div>
                </div>
                
                
            </apex:form>
        </div>
    </div>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46606102-1', 'salesforce.com');
  ga('send', 'pageview');

</script>
</apex:page>